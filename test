/* global fetch */
class Bof {
  onButtonSubmit () {
    const cb = () => {
      fetch('http://imageUrl', {
        method: 'post',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          input: this.state.input
        })
      })
        .then((response) => (response.json()))
        .then((respJson) => {
          if (respJson) {
            fetch('http://image', {
              method: 'put',
              headers: {'Content-Type': 'application/json'},
              body: JSON.stringify({
                id: this.state.user.id
              })
            })
              .then((response) => (response.json()))
              .then((count) => {
                this.setState((state) => ({...state.user, entries: count}));
              })
              .catch(console.log);
          }
          this.displayFaceBox(this.calculateFaceLocation(respJson));
        })
        .catch(console.log);
    };

    this.setState((state) => ({
      imageUrl: state.input
    }), cb);
  }


}
